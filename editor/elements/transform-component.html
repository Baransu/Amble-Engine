<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="transform-component">

	<style>

    .panel {
		margin-top: 20px;
		color: black;
	}

	</style>

	<template>

        <div class="panel panel-primary">
			<div class="panel-heading" on-click="hide">
				<div class="row">
					<div class="col-md-6">
						<h3 class="panel-title">Transform</h3>

					</div>
					<!-- utility buttons -->
				</div>

			</div>
            <div class="panel-body" hidden$="{{hideConent}}">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-6">
			                <form class="form-horizontal">
			                    <div class="form-group form-group-sm">
			                        <label>position.x</label>
									<input class="form-control" type="number" step="1" on-change="valuesChange" value="{{actor.transform.position.y::input}}">
			                    </div>
			                    <div class="form-group form-group-sm">
			                        <label>scale.y</label>
			                        <input class="form-control" type="number" step="0.01" on-change="valuesChange" value="{{actor.transform.scale.y::input}}">
			                    </div>
			                </form>
						</div>

						<div class="col-md-6">
							<form class="form-hotizontal">
			                    <div class="form-group form-group-sm">
			                        <label>position.y</label>
			                        <input class="form-control" type="number" step="1" on-change="valuesChange" value="{{actor.transform.position.x::input}}">
			                    </div>
			                    <div class="form-group form-group-sm">
			                        <label>scale.x</label>
			                        <input class="form-control" type="number" step="0.01" on-change="valuesChange" value="{{actor.transform.scale.x::input}}">
			                    </div>
			                </form>
						</div>
					</div>


	                <div class="row">
						<div class="col-md-11">

		                    <label>rotation</label>
		                    <input class="form-control"type="number" step="0.1" on-change="valuesChange" value="{{actor.transform.rotation::input}}">

						</div>
	                </div>

				</div>
            </div>
        </div>


	</template>

</dom-module>

<script>

	Polymer({
		is: 'transform-component',

		properties: {
			actor: {
				type: Object,
				value: null,
				notify: true,
				observer: 'refreshActor'
			},
			hideConent: {
				type: Boolean,
				value: false
			}
		},

		valuesChange: function() {
			//apply object changes to prefab
			if(this.actor) {
				//position
				this.actor.prefab.transform.args.position.args.x = this.actor.transform.position.x;
				this.actor.prefab.transform.args.position.args.y = this.actor.transform.position.y;

				//scale
				this.actor.prefab.transform.args.scale.args.x = this.actor.transform.scale.x;
				this.actor.prefab.transform.args.scale.args.y = this.actor.transform.scale.y;

				//rotation
				this.actor.prefab.transform.args.rotation = this.actor.transform.rotation;
			}
		},

		refreshActor: function() {
			if(this.actor.sceneID) {
				var sceneID = this.actor.sceneID;
				this.actor = Amble.app.scene.getActorByID(sceneID);

				this.valuesChange();
			}
		},

		hide: function(){
			this.hideConent = !this.hideConent;
		}

	});

</script>
